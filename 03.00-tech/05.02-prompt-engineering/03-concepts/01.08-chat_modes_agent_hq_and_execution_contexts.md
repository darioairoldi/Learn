---
title: "Chat modes, Agent HQ, and execution contexts"
author: "Dario Airoldi"
date: "2026-03-01"
categories: [tech, prompt-engineering, github-copilot, concepts]
description: "Understand the four built-in chat modes, how Agent HQ provides unified session management, and how the three execution contexts (local, background, cloud) enable different work patterns."
---

# Chat modes, Agent HQ, and execution contexts

GitHub Copilot isn't a single-mode tool. It offers multiple ways to interact â€” from quick Q&A to autonomous multi-file refactoring â€” and multiple places to run that work â€” from your local VS Code window to a cloud agent that creates pull requests overnight. Understanding these modes and contexts helps you choose the right approach for each task.

This article explains the four built-in chat modes, the Agent HQ unified management interface, and the three execution contexts that determine *where* and *how* your agent sessions run.

## Table of contents

- [ğŸ¯ The four chat modes](#-the-four-chat-modes)
- [ğŸ—ï¸ Agent HQ: unified session management](#ï¸-agent-hq-unified-session-management)
- [ğŸ–¥ï¸ Execution contexts: local, background, and cloud](#ï¸-execution-contexts-local-background-and-cloud)
- [ğŸŒ³ Work tree isolation](#-work-tree-isolation)
- [ğŸ“‹ Plan â†’ agent delegation workflow](#-plan--agent-delegation-workflow)
- [âœ… Choosing the right mode and context](#-choosing-the-right-mode-and-context)
- [ğŸ¯ Conclusion](#-conclusion)
- [ğŸ“š References](#-references)

---

## ğŸ¯ The four chat modes

GitHub Copilot Chat provides four built-in chat modes, accessible via the mode picker in the chat input. Each mode defines a different level of autonomy and capability:

| Mode | What it does | Can edit files? | Best for |
|------|-------------|----------------|----------|
| **Agent** | Autonomous mode â€” determines necessary changes and applies them | Yes | Complex multi-file refactoring, feature implementation |
| **Plan** | Creates detailed implementation plans without modifying files | No (read-only) | Architecture planning, understanding approach before execution |
| **Ask** | Q&A mode for questions without file modifications | No | Learning, code explanations, debugging assistance |
| **Edit** | Direct code editing for targeted changes | Yes | Quick fixes, single-file modifications |

### How modes supersede custom patterns

Before these built-in modes existed, developers created complex multi-phase agent patterns â€” a "research" agent that gathered context, a "planner" agent that created a plan, and an "implementer" agent that made changes. The built-in modes now handle the most common version of this workflow natively:

1. Use **Plan mode** to analyze the problem and generate an implementation plan
2. Review and refine the plan
3. Use **Agent mode** (or delegate to background/cloud) to execute

This doesn't eliminate the need for custom agents â€” specialized personas, tool restrictions, and domain-specific workflows still require `.agent.md` files. But for the general "think, then do" pattern, built-in modes are simpler and more reliable.

### When to use each mode

**Agent mode** â€” your default for getting work done. The model reasons autonomously, searches your codebase, edits files, runs commands, and validates results. Use it when you want Copilot to complete a task end-to-end.

**Plan mode** â€” use before committing to a large change. Plan mode generates a structured approach without making any modifications. It's particularly valuable for complex refactoring where you want to understand the scope before starting.

**Ask mode** â€” use for learning and exploration. Ask mode answers questions about your codebase, explains how code works, and discusses architecture decisions â€” all without touching any files.

**Edit mode** â€” use for focused, single-file changes. Edit mode is faster than Agent mode for simple tasks because it doesn't need to reason about multi-step workflows.

---

## ğŸ—ï¸ Agent HQ: unified session management

<mark>Agent HQ</mark> is the centralized interface for managing all agent sessions across execution contexts. Introduced in VS Code 1.107, it provides visibility and control over local, background, and cloud sessions from a single view.

### What Agent HQ shows

- **Recent sessions list** â€” all local, background, and cloud sessions with filtering and search
- **Session state indicators** â€” read/unread markers, input-required flags, completion status
- **Quick actions** â€” archive, continue, copy workspace changes, delegate to different context

### Session management features

| Feature | Description |
|---------|-------------|
| **Side-by-side view** | Agent sessions default to side-by-side layout for easier comparison |
| **Input-required markers** | Sessions needing user input are clearly flagged |
| **Workspace copying** | Copy workspace changes when creating background sessions |
| **Persistent chat prompt** | Chat prompt isn't cleared when creating a new session |
| **Collapsed tool calls** | Tool calls in cloud sessions are collapsed by default |

Agent HQ is particularly valuable when running multiple sessions in parallel â€” you can have a background agent refactoring your test suite while you interact with a local agent on a different feature, and track both sessions from the same interface.

---

## ğŸ–¥ï¸ Execution contexts: local, background, and cloud

Every agent session runs in one of three execution contexts. The choice of context determines where code runs, how isolation works, and what integration model applies.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXECUTION CONTEXTS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚                  â”‚                           â”‚
â”‚  LOCAL           â”‚  BACKGROUND      â”‚  CLOUD                   â”‚
â”‚                  â”‚                  â”‚                           â”‚
â”‚  Interactive     â”‚  Autonomous      â”‚  Async (GitHub)          â”‚
â”‚  Same window     â”‚  Git work tree   â”‚  Creates PRs             â”‚
â”‚  Blocks UI       â”‚  Non-blocking    â”‚  Team collaboration      â”‚
â”‚                  â”‚                  â”‚                           â”‚
â”‚  Best for:       â”‚  Best for:       â”‚  Best for:               â”‚
â”‚  â€¢ Quick fixes   â”‚  â€¢ Long tasks    â”‚  â€¢ Overnight work        â”‚
â”‚  â€¢ Iterative     â”‚  â€¢ Parallel      â”‚  â€¢ Complex refactors     â”‚
â”‚    work          â”‚    exploration   â”‚  â€¢ Team review           â”‚
â”‚                  â”‚  â€¢ Large changes â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Local agents

The most familiar context. The agent runs in your current VS Code window, interacting with your workspace directly.

| Aspect | Description |
|--------|-------------|
| **Execution** | Interactive, in the current window |
| **Isolation** | None â€” shares your workspace and files |
| **Visibility** | Full â€” you see every tool call and result |
| **Blocking** | Yes â€” the chat panel is occupied |
| **Best for** | Quick tasks, iterative debugging, guided exploration |

Local agents are ideal when you need tight feedback loops â€” you're working alongside the agent, reviewing each step, and steering the conversation.

### Background agents

Background agents run autonomously using Git work trees for complete isolation.

| Aspect | Description |
|--------|-------------|
| **Execution** | Autonomous, in a separate Git work tree |
| **Isolation** | Full â€” uses an isolated work tree, no interference with your files |
| **Visibility** | Via Agent HQ â€” check progress, review changes |
| **Blocking** | No â€” you keep working while the agent runs |
| **Best for** | Long-running tasks, parallel exploration, large refactoring |

Background agents are the key productivity multiplier â€” you can launch three agents exploring different approaches to the same problem, continue your own work, and review results when they're done.

### Cloud agents (GitHub Copilot coding agent)

Cloud agents run on GitHub's infrastructure and create pull requests with their changes.

| Aspect | Description |
|--------|-------------|
| **Execution** | On GitHub's servers, asynchronous |
| **Isolation** | Full â€” separate branch, separate environment |
| **Visibility** | Via GitHub PR â€” standard code review workflow |
| **Blocking** | No â€” completely async |
| **Best for** | Overnight work, complex refactoring, team review |

Cloud agents integrate into your team's existing PR workflow â€” changes go through code review, CI runs, and standard approval processes.

---

## ğŸŒ³ Work tree isolation

Background agents use <mark>Git work trees</mark> for complete isolation from your main workspace. This is a critical architecture detail that enables safe, parallel agent execution.

### How it works

```
1. REQUEST
   "Start background agent session"
        â”‚
        â–¼
2. WORK TREE CREATION
   Git creates isolated work tree:
   /repo/.git/worktrees/agent-session-xyz/
   â€¢ Full copy of current branch state
   â€¢ Independent staging area
   â€¢ No interference with main workspace
        â”‚
        â–¼
3. AGENT EXECUTION
   Agent works in isolated work tree:
   â€¢ Makes changes without affecting your files
   â€¢ Can run tests and builds in isolation
   â€¢ Session visible in Agent HQ
        â”‚
        â–¼
4. REVIEW & INTEGRATE
   User reviews in Agent HQ:
   â€¢ "Direct Apply" â†’ merges to your workspace
   â€¢ "Create PR" â†’ pushes for team review
   Work tree cleaned up after integration
```

### Why work tree isolation matters

| Benefit | Description |
|---------|-------------|
| **No conflicts** | Agent changes don't interfere with your local uncommitted work |
| **Parallel exploration** | Run multiple agents exploring different approaches simultaneously |
| **Safe experimentation** | Agent can make breaking changes without affecting your environment |
| **SCM integration** | Changes appear in Source Control view with clear session attribution |

Without work tree isolation, running a background agent would risk modifying files you're actively editing. With isolation, your workspace stays untouched until you explicitly choose to integrate the agent's changes.

---

## ğŸ“‹ Plan â†’ agent delegation workflow

One of the most powerful patterns combines Plan mode with agent delegation:

```
1. PLAN MODE
   "Plan authentication refactoring"
   
   Copilot generates detailed plan:
   â€¢ Step 1: Extract auth middleware
   â€¢ Step 2: Create token service
   â€¢ Step 3: Update route handlers
   â€¢ Step 4: Add unit tests
        â”‚
        â–¼
2. REVIEW
   You review the plan, refine if needed
        â”‚
        â–¼
3. DELEGATE
   "Start Implementation" button appears
   
   Choose execution context:
   â—‹ Local agent (interactive)
   â—‹ Background agent (work tree)
   â—‹ Cloud agent (GitHub PR)
```

This pattern gives you control over the approach (Plan mode) while leveraging automation for execution (Agent mode in any context). It's especially valuable for complex changes where you want human judgment on the strategy before autonomous execution begins.

### Entry points for delegation

You can delegate to different agent contexts from multiple places:

- **Chat view** â€” "Continue in..." button in chat response
- **Agent HQ** â€” session actions menu â†’ "Continue as..."
- **Command Palette** â€” "GitHub Copilot: Start Background Session"
- **Untitled prompt files** â€” "Continue in..." button when drafting prompts

---

## âœ… Choosing the right mode and context

### Mode selection

```
What do you need?
â”‚
â”œâ”€ Understand code or architecture
â”‚   â””â”€ Ask mode
â”‚
â”œâ”€ Plan a complex change before doing it
â”‚   â””â”€ Plan mode â†’ then delegate to Agent
â”‚
â”œâ”€ Make a quick, single-file edit
â”‚   â””â”€ Edit mode
â”‚
â””â”€ Complete a task end-to-end
    â””â”€ Agent mode
```

### Context selection

```
How should the work run?
â”‚
â”œâ”€ Interactive, with tight feedback loops
â”‚   â””â”€ Local agent
â”‚
â”œâ”€ Long-running, keep working meanwhile
â”‚   â””â”€ Background agent (work tree)
â”‚
â””â”€ Async, team review, overnight
    â””â”€ Cloud agent (GitHub PR)
```

### Combined decision table

| Scenario | Mode | Context |
|----------|------|---------|
| "Fix this typo" | Edit | Local |
| "Explain how auth works" | Ask | Local |
| "Plan database migration" | Plan | Local |
| "Implement the migration plan" | Agent | Background |
| "Refactor test suite" | Agent | Background (parallel) |
| "Add new feature for next sprint" | Agent | Cloud |
| "Explore three approaches to caching" | Agent | Background (Ã—3, parallel) |
| "Quick iterative debugging" | Agent | Local |

---

## ğŸ¯ Conclusion

Chat modes, Agent HQ, and execution contexts form the interaction layer of GitHub Copilot. Modes control *what kind of work* happens (ask, plan, edit, or autonomous). Execution contexts control *where that work runs* (locally, in a background work tree, or on GitHub's cloud). Agent HQ ties everything together with unified session management.

### Key takeaways

- **Four chat modes** provide different autonomy levels: Agent (autonomous editing), Plan (read-only planning), Ask (Q&A), Edit (focused changes)
- Built-in modes **supersede many custom multi-phase patterns** â€” "Plan then Agent" replaces the common "research â†’ plan â†’ implement" workflow
- **Agent HQ** provides centralized management of all sessions across contexts
- **Three execution contexts** determine where work runs: local (interactive), background (work tree isolation), cloud (GitHub PRs)
- **Work tree isolation** enables safe, parallel background agent execution without interfering with your workspace
- **Plan â†’ delegate** is a powerful pattern: plan with human judgment, execute with agent automation
- **Context selection** depends on your need for interactivity, parallelism, and team collaboration

### Next steps

- [Understanding agents, invocation, handoffs, and subagents](./01.04-understanding_agents_invocation_handoffs_and_subagents.md) â€” the customization layer that builds on top of these modes
- [How Copilot assembles and processes prompts](./01.02-how_copilot_assembles_and_processes_prompts.md) â€” how your chat mode and context affect prompt assembly
- [How to design orchestrator prompts](../04-howto/10.00-how_to_design_orchestrator_prompts.md) â€” advanced workflows that leverage multiple modes and contexts

---

## ğŸ“š References

**[VS Code Copilot Chat Overview](https://code.visualstudio.com/docs/copilot/chat/copilot-chat)** `[ğŸ“˜ Official]`
Microsoft's documentation for Copilot Chat modes, including Agent, Plan, Ask, and Edit modes with usage guidance.

**[VS Code Agent HQ Documentation](https://code.visualstudio.com/docs/copilot/agent-hq)** `[ğŸ“˜ Official]`
Official documentation for Agent HQ â€” unified session management, execution contexts, work tree isolation, and delegation workflows.

**[VS Code v1.107 Release Notes](https://code.visualstudio.com/updates/v1_107)** `[ğŸ“˜ Official]`
December 2024 release introducing Agent HQ, background agents with work tree isolation, cloud agent integration, and the Plan mode â†’ delegation workflow.

**[GitHub Copilot Coding Agent](https://docs.github.com/en/copilot/using-github-copilot/using-the-github-copilot-coding-agent)** `[ğŸ“˜ Official]`
GitHub's documentation for the cloud execution context â€” the Copilot coding agent that creates pull requests from issues and natural language task descriptions.

---

<!--
---
validations:
  grammar: {last_run: null, model: null, outcome: null, issues_found: 0}
  readability: {last_run: null, model: null, outcome: null, flesch_score: null, grade_level: null}
  understandability: {last_run: null, model: null, outcome: null, target_audience: null}
  structure: {last_run: null, model: null, outcome: null, has_toc: true, has_introduction: true, has_conclusion: true, has_references: true}
  facts: {last_run: null, model: null, outcome: null, claims_checked: 0, sources_verified: 0}
  logic: {last_run: null, model: null, outcome: null, flow_score: null}

article_metadata:
  filename: "01.08-chat_modes_agent_hq_and_execution_contexts.md"
  created: "2026-03-01"
  last_updated: "2026-03-01"
  version: "1.0"
  status: "published"
  primary_topic: "Chat modes, Agent HQ, and execution contexts"

cross_references:
  related_articles:
    - "01.04-understanding_agents_invocation_handoffs_and_subagents.md"
    - "01.02-how_copilot_assembles_and_processes_prompts.md"
    - "10.00-how_to_design_orchestrator_prompts_for_complex_agent_driven_workflows.md"
  series: "Prompt Engineering for GitHub Copilot"
  series_order: 9
  prerequisites: []
---
-->
